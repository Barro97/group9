{% extends 'base.html' %}

{% block page_head %}
<title>Chat</title>
{% endblock %}

{% block main %}
<main>
    <div class="chat">
        <div class="user-container" id="user-container">
            <div class="profile-picture">
                <img id="user-picture" src="{{ user_picture }}" alt="profile picture">
            </div>
            <div class="name">
                <h1 id="user-name">{{ user_name }}</h1>
                <h3 id="user-role">{{ user_role }}</h3>
            </div>
            <div class="profile-link">
                <a href="{{ url_for('profile.view_profile', user_id=user_id) }}"><img src="https://static-00.iconduck.com/assets.00/profile-user-icon-2048x2048-m41rxkoe.png"
                                alt="User Profile"></a>
            </div>
        </div>

        <div class="chat-container">
            <div class="chat-header">chat with {{ user_name }}</div>
            <div class="chat-messages" id="chat-messages">
                <!-- Messages will be displayed here -->
            </div>
            <div class="chat-input">
                <textarea id="message-input" placeholder="Type a message..."></textarea>
                <label for="file-input" class="custom-file-upload">
                    <img src="https://static.thenounproject.com/png/59103-200.png" alt="Upload Files Icon">
                </label>
                <input type="file" id="file-input" multiple>
                <button onclick="sendMessage()">Send</button>
            </div>
        </div>
    </div>
    <script>
        // Pass user_email and profile_email from Flask to JavaScript
        const userEmail = "{{ user_email }}";
        const profileEmail = "{{ profile_email }}";
    </script>
</main>
{% endblock %}
